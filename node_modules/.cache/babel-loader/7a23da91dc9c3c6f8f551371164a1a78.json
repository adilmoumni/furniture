{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction extractPayload(widgets, instantSearchInstance, payload) {\n  var parent = instantSearchInstance.mainIndex;\n  var initOptions = {\n    instantSearchInstance: instantSearchInstance,\n    parent: parent,\n    scopedResults: [],\n    state: parent.getHelper().state,\n    helper: parent.getHelper(),\n    createURL: parent.createURL,\n    uiState: instantSearchInstance._initialUiState,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance._isSearchStalled\n    }\n  };\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n\n      if (renderState && _typeof(renderState.widgetParams) === 'object') {\n        widgetParams = renderState.widgetParams;\n      }\n    } // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n\n\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n\n    if (widget.$$type === 'ais.index') {\n      extractPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\n\nexport function isMetadataEnabled() {\n  return typeof window !== 'undefined' && window.navigator.userAgent.indexOf('Algolia Crawler') > -1;\n}\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\n\nexport function createMetadataMiddleware() {\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}","map":{"version":3,"sources":["/Users/adil/Documents/GitHub/furniture-front/node_modules/instantsearch.js/es/middlewares/createMetadataMiddleware.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","extractPayload","widgets","instantSearchInstance","payload","parent","mainIndex","initOptions","scopedResults","state","getHelper","helper","createURL","uiState","_initialUiState","renderState","templatesConfig","searchMetadata","isSearchStalled","_isSearchStalled","forEach","widget","widgetParams","getWidgetRenderState","params","Object","keys","filter","key","undefined","push","type","$$type","widgetType","$$widgetType","getWidgets","isMetadataEnabled","window","navigator","userAgent","indexOf","createMetadataMiddleware","_ref","payloadContainer","document","createElement","refNode","querySelector","name","onStateChange","subscribe","setTimeout","client","ua","transporter","value","_ua","content","JSON","stringify","appendChild","unsubscribe","remove"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction extractPayload(widgets, instantSearchInstance, payload) {\n  var parent = instantSearchInstance.mainIndex;\n  var initOptions = {\n    instantSearchInstance: instantSearchInstance,\n    parent: parent,\n    scopedResults: [],\n    state: parent.getHelper().state,\n    helper: parent.getHelper(),\n    createURL: parent.createURL,\n    uiState: instantSearchInstance._initialUiState,\n    renderState: instantSearchInstance.renderState,\n    templatesConfig: instantSearchInstance.templatesConfig,\n    searchMetadata: {\n      isSearchStalled: instantSearchInstance._isSearchStalled\n    }\n  };\n  widgets.forEach(function (widget) {\n    var widgetParams = {};\n\n    if (widget.getWidgetRenderState) {\n      var renderState = widget.getWidgetRenderState(initOptions);\n\n      if (renderState && _typeof(renderState.widgetParams) === 'object') {\n        widgetParams = renderState.widgetParams;\n      }\n    } // since we destructure in all widgets, the parameters with defaults are set to \"undefined\"\n\n\n    var params = Object.keys(widgetParams).filter(function (key) {\n      return widgetParams[key] !== undefined;\n    });\n    payload.widgets.push({\n      type: widget.$$type,\n      widgetType: widget.$$widgetType,\n      params: params\n    });\n\n    if (widget.$$type === 'ais.index') {\n      extractPayload(widget.getWidgets(), instantSearchInstance, payload);\n    }\n  });\n}\n\nexport function isMetadataEnabled() {\n  return typeof window !== 'undefined' && window.navigator.userAgent.indexOf('Algolia Crawler') > -1;\n}\n/**\n * Exposes the metadata of mounted widgets in a custom\n * `<meta name=\"instantsearch:widgets\" />` tag. The metadata per widget is:\n * - applied parameters\n * - widget name\n * - connector name\n */\n\nexport function createMetadataMiddleware() {\n  return function (_ref) {\n    var instantSearchInstance = _ref.instantSearchInstance;\n    var payload = {\n      widgets: []\n    };\n    var payloadContainer = document.createElement('meta');\n    var refNode = document.querySelector('head');\n    payloadContainer.name = 'instantsearch:widgets';\n    return {\n      onStateChange: function onStateChange() {},\n      subscribe: function subscribe() {\n        // using setTimeout here to delay extraction until widgets have been added in a tick (e.g. Vue)\n        setTimeout(function () {\n          var client = instantSearchInstance.client;\n          payload.ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n          extractPayload(instantSearchInstance.mainIndex.getWidgets(), instantSearchInstance, payload);\n          payloadContainer.content = JSON.stringify(payload);\n          refNode.appendChild(payloadContainer);\n        }, 0);\n      },\n      unsubscribe: function unsubscribe() {\n        payloadContainer.remove();\n      }\n    };\n  };\n}"]},"metadata":{},"sourceType":"module"}